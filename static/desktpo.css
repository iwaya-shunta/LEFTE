:root { --bg: #131314; --card: #1e1f20; --text: #e3e3e3; --accent: #8ab4f8; --border: #444746; }
        * { box-sizing: border-box; }
        body { margin: 0; padding: 10px; font-family: sans-serif; background: var(--bg); color: var(--text); display: grid; grid-template-columns: 1fr 1.2fr 1fr; grid-template-rows: 90px 1fr; gap: 12px; height: 95vh; width: 100vw; overflow: hidden; }

        /* ãƒ‘ãƒãƒ«ç®¡ç† */
        .panel { display: flex; flex-direction: column; gap: 12px; height: 100%; min-height: 0; }
        .widget { background: var(--card); border-radius: 20px; padding: 15px; border: 1px solid var(--border); display: flex; flex-direction: column; overflow: hidden; }

        /* ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒªã‚¹ãƒˆã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
        /* 1. ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆè¡¨è¨˜ï¼‰ã‚’ã‚°ãƒ¬ãƒ¼ã«ã™ã‚‹è¨­å®š */
        #chat-history::-webkit-scrollbar {
            width: 6px;
        }
        #chat-history::-webkit-scrollbar-thumb {
            background: #666; /* ã¤ã¾ã¿ã‚’ã‚°ãƒ¬ãƒ¼ã« */
            border-radius: 10px;
        }
        #chat-history::-webkit-scrollbar-track {
            background: transparent;
        }

        /* 2. ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã¨ãƒ›ãƒãƒ¼æ™‚ã®ã‚°ãƒ¬ãƒ¼è¨­å®š */
        .news-link, .news-link:visited {
            color: #bbb !important; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ–‡å­—è‰²ã‚’å°‘ã—è½ã¡ç€ã„ãŸã‚°ãƒ¬ãƒ¼ã« */
            text-decoration: none;
            font-size: 14px;
            display: block;
            padding: 8px 10px;
            transition: all 0.2s;
            border-radius: 8px;
        }
        /* ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆå†…ã® iframe ãŒæ ã„ã£ã±ã„ã«åºƒãŒã‚‹ã‚ˆã†ã«ã™ã‚‹ */
        .widget iframe {
            border: none;
            border-radius: 18px;
            /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ä»¥å¤–ã® iframeï¼ˆåœ°å›³ãªã©ï¼‰ã¯åè»¢ã•ã›ãªã„ */
        }

        #weather-map {
            filter: none; /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«é©ç”¨ã•ã‚Œã¦ã„ã‚‹ invert ãƒ•ã‚£ãƒ«ã‚¿ã‚’è§£é™¤ */
        }
        .news-link:hover {
            background: rgba(255, 255, 255, 0.1) !important; /* ãƒ›ãƒãƒ¼èƒŒæ™¯ã‚’è–„ã„ã‚°ãƒ¬ãƒ¼ã« */
            color: #fff !important; /* æ–‡å­—ã‚’ç™½ãæµ®ã‹ã³ä¸ŠãŒã‚‰ã›ã‚‹ */
        }

        /* 3. ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ï¼ˆâ–²â–¼ï¼‰ã‚’æ§ãˆã‚ãªè‰²ã«å¤‰æ›´ */
        .scroll-controls button {
            /* ... æ—¢å­˜ã®è¨­å®š ... */
            color: #888; /* é’ï¼ˆaccentï¼‰ã§ã¯ãªãã€è½ã¡ç€ã„ãŸã‚°ãƒ¬ãƒ¼ã«å¤‰æ›´ */
        }

        /* ãƒˆãƒƒãƒ—ãƒãƒ¼ */
        .top-bar { grid-column: 1 / 4; display: flex; align-items: center; justify-content: space-between; background: var(--card); border-radius: 24px; border: 1px solid var(--border); padding: 0 25px; }
        .brand { display: flex; align-items: center; gap: 12px; }
        .brand-logo { width: 32px; height: 32px; filter: drop-shadow(0 0 5px var(--accent)); }
        #clock { font-size: 34px; font-weight: 200; margin-right: 15px; }

        /* ãƒãƒ£ãƒƒãƒˆãƒ‡ã‚¶ã‚¤ãƒ³ */
        #chat-history { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 12px; white-space: pre-wrap; -webkit-overflow-scrolling: touch; }
        /* ãƒãƒ£ãƒƒãƒˆãƒ‡ã‚¶ã‚¤ãƒ³ã®ä¿®æ­£æ¡ˆ */
        .message { max-width: 85%; padding: 12px 16px; border-radius: 18px; font-size: 14px; line-height: 1.5; opacity: 0; transform: translateY(10px); transition: 0.3s ease-out; position: relative; overflow-wrap: anywhere; word-break: break-word;}
        .message.show { opacity: 1; transform: translateY(0); }
        .gemini { background: #1a1a1b; border: 1px solid var(--border); align-self: flex-start; margin-left: 35px; }
        .user { background: #2b2a2a; align-self: flex-end; }

        /* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®é…ç½® */
        .message-content {
            display: flex;
            flex-direction: column;
        }

        /* ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .message-time {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.4);
            margin-top: 4px;
            align-self: flex-end; /* å³å´ã«å¯„ã›ã‚‹ */
        }

        /* ãƒ¦ãƒ¼ã‚¶ãƒ¼å´ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¯å·¦å´ã«å¯„ã›ãŸã„å ´åˆã¯èª¿æ•´ */
        .message.user .message-time {
            color: rgba(255, 255, 255, 0.5);
            align-self: flex-end;
        }

        /* ãƒãƒ–ãƒ«è‡ªä½“ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ */
        .message {
            display: flex;
            flex-direction: column; /* ç¸¦ä¸¦ã³ã« */
            max-width: 80%;
            margin-bottom: 15px;
        }

        /* ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ãƒ»ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ */
        pre { position: relative; background: #000 !important; padding: 15px; border-radius: 10px; border: 1px solid var(--border); margin: 10px 0; overflow-x: auto; }
        code { color: #fff; font-family: monospace; }
        .copy-btn { position: absolute; top: 8px; right: 8px; background: #333; border: 1px solid var(--border); color: #fff; border-radius: 5px; cursor: pointer; font-size: 11px; padding: 4px 8px; opacity: 0.8; }
        .copy-btn:hover { opacity: 1; background: var(--accent); color: var(--bg); }

        /* AIã‚¢ãƒã‚¿ãƒ¼ */
        .ai-avatar { position: absolute; left: -35px; top: 0; width: 28px; height: 28px; border-radius: 50%; background: #1a1a1b; border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; font-size: 11px; color: var(--accent); }
        .speaking-icon { animation: ai-breathe 1.5s infinite ease-in-out; border-color: var(--accent); }
        @keyframes ai-breathe { 0% { box-shadow: 0 0 3px var(--accent); } 50% { box-shadow: 0 0 12px var(--accent); } 100% { box-shadow: 0 0 3px var(--accent); } }

        /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
        .input-wrapper { background: #28292a; padding: 12px; display: flex; align-items: center; border-radius: 18px; gap: 10px; }
        #geminiInput { flex: 1; background: transparent; border: none; color: white; outline: none; }
        #micBtn { background: none; border: none; color: var(--text); cursor: pointer; }
        .recording #micBtn { color: var(--accent); filter: drop-shadow(0 0 8px var(--accent)); }

        /* ãƒ¢ãƒ‡ãƒ«ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ */
        .model-selector { display: flex; background: #131314; border: 1px solid var(--border); border-radius: 12px; padding: 3px; }
        .model-selector input { display: none; }
        .model-selector label { padding: 6px 12px; border-radius: 9px; cursor: pointer; font-size: 11px; font-weight: bold; color: #888; transition: 0.2s; }
        .model-selector input:checked + label { background: #1e1f20; color: var(--accent); }

        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ï¼ˆãƒãƒ£ãƒƒãƒˆãƒ‘ãƒãƒ«å†…ï¼‰ */
        .scroll-controls { position: absolute; right: 20px; bottom: 85px; display: flex; flex-direction: column; gap: 8px; z-index: 100; }
        .scroll-controls button { width: 42px; height: 42px; border-radius: 50%; background: var(--card); border: 1px solid var(--border); color: var(--accent); cursor: pointer; font-size: 18px; box-shadow: 0 4px 10px rgba(0,0,0,0.4); transition: 0.2s; }
        .scroll-controls button:active { transform: scale(0.9); background: var(--border); }

        iframe { width: 100%; height: 100%; border: none; border-radius: 18px; filter: invert(90%) hue-rotate(180deg); }

        /* LEFTEãŒæ€è€ƒä¸­ã«ãƒ­ã‚´ã‚’é’ãæ˜æ»…ã•ã›ã‚‹ */
        @keyframes thinking-glow {
            0% { filter: drop-shadow(0 0 2px var(--accent)); opacity: 0.7; }
            50% { filter: drop-shadow(0 0 12px var(--accent)); opacity: 1; }
            100% { filter: drop-shadow(0 0 2px var(--accent)); opacity: 0.7; }
        }

        .is-thinking {
            animation: thinking-glow 1.5s infinite ease-in-out;
            color: var(--accent) !important;
        }

        /* æ€è€ƒä¸­ã®ãƒ‰ãƒƒãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ...ã®éƒ¨åˆ†ã‚’å‹•ã‹ã—ãŸã„å ´åˆï¼‰ */
        /* ãƒ‰ãƒƒãƒˆã«å‹•ãã‚’ã¤ã‘ã‚‹ï¼ˆã‚‚ã—è¿½åŠ ã—ã¦ã„ãªã‘ã‚Œã°ï¼‰ */
        #thinking-bubble .res-txt {
            font-weight: bold;
            display: inline-block;
            min-width: 24px;
        }

        #thinking-bubble .res-txt::after {
            content: '';
            animation: dots-blink 1.5s infinite steps(4);
        }

        /* desktpo.css ã«è¿½åŠ  */
        .voice-btn {
            background: rgba(138, 180, 248, 0.1) !important; /* è–„ã„ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ */
            border: 1px solid var(--border) !important;
            border-radius: 8px !important;
            color: var(--accent) !important;
            padding: 2px 6px !important;
            font-size: 12px !important;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .voice-btn:hover {
            background: rgba(138, 180, 248, 0.2) !important;
            transform: scale(1.05);
        }

        /* 2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸‹éƒ¨ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ */
        .message-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            padding-top: 4px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* desktpo.css */
        .input-wrapper {
            gap: 15px; /* ãƒœã‚¿ãƒ³åŒå£«ã®é–“éš”ã‚’åºƒã’ã‚‹ */
        }

        #geminiInput {
            font-size: 15px;
        }

        /* ğŸ”Š ãƒ†ã‚¹ãƒˆãƒœã‚¿ãƒ³ã‚’å°‘ã—æ§ãˆã‚ã«ã™ã‚‹ */
        #testVoiceBtn {
            opacity: 0.6;
            transition: 0.3s;
        }
        #testVoiceBtn:hover {
            opacity: 1;
            color: var(--accent);
        }

        /* --- IDã‚’ chatBox ã«çµ±ä¸€ã—ã¦æ•´ç† --- */
        #chatBox {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
            white-space: pre-wrap;
        }

        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ chatBox ã«é©ç”¨ */
        #chatBox::-webkit-scrollbar { width: 6px; }
        #chatBox::-webkit-scrollbar-thumb { background: #444; border-radius: 10px; }
        #chatBox::-webkit-scrollbar-track { background: transparent; }

        /* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ–ãƒ«ã®å…±é€šè¨­å®š */
        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.6;
            position: relative;
            opacity: 0;
            transform: translateY(10px);
            transition: 0.3s ease-out;
        }
        .message.show { opacity: 1; transform: translateY(0); }

        /* ãƒœã‚¯ï¼ˆL.E.F.T.E.ï¼‰ã®å¹ãå‡ºã— */
        .gemini {
            background: #1e1f20;
            border: 1px solid var(--border);
            align-self: flex-start;
            margin-left: 40px; /* ã‚¢ãƒã‚¿ãƒ¼åˆ†ã®ä½™ç™½ */
        }

        /* ã—ã‚…ã‚“ãŸï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã®å¹ãå‡ºã— */
        .user {
            background: #2b2a2a;
            color: #fff;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        /* AIã‚¢ãƒã‚¿ãƒ¼ã®ä½ç½®ã‚’å¾®èª¿æ•´ */
        .ai-avatar {
            position: absolute;
            left: -40px;
            top: 4px;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #1a1a1b;
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--accent);
        }

        /* å¹ãå‡ºã—ä¸‹ã®ãƒ•ãƒƒã‚¿ãƒ¼ï¼ˆæ™‚é–“ã¨å†ç”Ÿãƒœã‚¿ãƒ³ï¼‰ */
        .message-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            font-size: 11px;
        }

        .voice-btn {
            background: rgba(138, 180, 248, 0.1) !important;
            border: 1px solid rgba(138, 180, 248, 0.2) !important;
            color: var(--accent) !important;
            padding: 3px 8px !important;
            border-radius: 12px !important;
            cursor: pointer;
            font-size: 10px !important;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
        /* desktpo.css ã®æœ€å¾Œã«ã‚ã‚‹ @media éƒ¨åˆ†ã‚’å¼·åŒ– */
        @media (max-width: 768px) {
            body {
                display: flex !important;
                flex-direction: column !important;
                height: 100dvh !important;
                padding: 0 !important;
            }
            .panel {
                display: none !important; /* åŸºæœ¬ã¯å…¨éƒ¨æ¶ˆã™ */
                height: calc(100% - 130px) !important; /* ä¸Šä¸‹ã®ãƒãƒ¼ã‚’é™¤ã„ãŸé«˜ã• */
            }
            /* JSã§ã‚¯ãƒ©ã‚¹ãŒã¤ã„ãŸæ™‚ã ã‘è¡¨ç¤º */
            .panel.active-panel {
                display: flex !important;
                flex-direction: column !important;
            }
            .bottom-nav {
                display: flex !important;
                position: fixed;
                bottom: 0;
                width: 100%;
                z-index: 1000;
            }
        }